{"remainingRequest":"/home/filippo/Área de Trabalho/snowman/frontend/node_modules/babel-loader/lib/index.js!/home/filippo/Área de Trabalho/snowman/frontend/node_modules/eslint-loader/index.js??ref--13-0!/home/filippo/Área de Trabalho/snowman/frontend/src/store/modules/user.js","dependencies":[{"path":"/home/filippo/Área de Trabalho/snowman/frontend/src/store/modules/user.js","mtime":1616777350666},{"path":"/home/filippo/Área de Trabalho/snowman/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1614099632392},{"path":"/home/filippo/Área de Trabalho/snowman/frontend/node_modules/babel-loader/lib/index.js","mtime":1614027570184},{"path":"/home/filippo/Área de Trabalho/snowman/frontend/node_modules/eslint-loader/index.js","mtime":1605203058655}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2ZpbGlwcG8vXHhDMXJlYSBkZSBUcmFiYWxoby9zbm93bWFuL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgQXV0aENvbnRyb2xsZXIgZnJvbSAiLi4vLi4vY29udHJvbGxlcnMvYXV0aENvbnRyb2xsZXIiOwppbXBvcnQgeyBzZXRDdXJyZW50VXNlciwgZ2V0Q3VycmVudFVzZXIgfSBmcm9tICIuLi8uLi91dGlscyI7CmV4cG9ydCBkZWZhdWx0IHsKICBzdGF0ZTogewogICAgY3VycmVudFVzZXI6IGdldEN1cnJlbnRVc2VyKCksCiAgICBsb2dpbkVycm9yOiBudWxsLAogICAgcHJvY2Vzc2luZzogZmFsc2UKICB9LAogIGdldHRlcnM6IHsKICAgIGN1cnJlbnRVc2VyOiBmdW5jdGlvbiBjdXJyZW50VXNlcihzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuY3VycmVudFVzZXI7CiAgICB9LAogICAgcHJvY2Vzc2luZzogZnVuY3Rpb24gcHJvY2Vzc2luZyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUucHJvY2Vzc2luZzsKICAgIH0sCiAgICBsb2dpbkVycm9yOiBmdW5jdGlvbiBsb2dpbkVycm9yKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5sb2dpbkVycm9yOwogICAgfQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBzZXRVc2VyOiBmdW5jdGlvbiBzZXRVc2VyKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHN0YXRlLmN1cnJlbnRVc2VyID0gcGF5bG9hZDsKICAgICAgc3RhdGUucHJvY2Vzc2luZyA9IGZhbHNlOwogICAgICBzdGF0ZS5sb2dpbkVycm9yID0gbnVsbDsKICAgIH0sCiAgICBzZXRMb2dvdXQ6IGZ1bmN0aW9uIHNldExvZ291dChzdGF0ZSkgewogICAgICBzdGF0ZS5jdXJyZW50VXNlciA9IG51bGw7CiAgICAgIHN0YXRlLnByb2Nlc3NpbmcgPSBmYWxzZTsKICAgICAgc3RhdGUubG9naW5FcnJvciA9IG51bGw7CiAgICB9LAogICAgc2V0UHJvY2Vzc2luZzogZnVuY3Rpb24gc2V0UHJvY2Vzc2luZyhzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5wcm9jZXNzaW5nID0gcGF5bG9hZDsKICAgICAgc3RhdGUubG9naW5FcnJvciA9IG51bGw7CiAgICB9LAogICAgc2V0RXJyb3I6IGZ1bmN0aW9uIHNldEVycm9yKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHN0YXRlLmxvZ2luRXJyb3IgPSBwYXlsb2FkOwogICAgICBzdGF0ZS5jdXJyZW50VXNlciA9IG51bGw7CiAgICAgIHN0YXRlLnByb2Nlc3NpbmcgPSBmYWxzZTsKICAgIH0sCiAgICBzZXRGb3Jnb3RNYWlsU3VjY2VzczogZnVuY3Rpb24gc2V0Rm9yZ290TWFpbFN1Y2Nlc3Moc3RhdGUpIHsKICAgICAgc3RhdGUubG9naW5FcnJvciA9IG51bGw7CiAgICAgIHN0YXRlLmN1cnJlbnRVc2VyID0gbnVsbDsKICAgICAgc3RhdGUucHJvY2Vzc2luZyA9IGZhbHNlOwogICAgfSwKICAgIHNldFJlc2V0UGFzc3dvcmRTdWNjZXNzOiBmdW5jdGlvbiBzZXRSZXNldFBhc3N3b3JkU3VjY2VzcyhzdGF0ZSkgewogICAgICBzdGF0ZS5sb2dpbkVycm9yID0gbnVsbDsKICAgICAgc3RhdGUuY3VycmVudFVzZXIgPSBudWxsOwogICAgICBzdGF0ZS5wcm9jZXNzaW5nID0gZmFsc2U7CiAgICB9LAogICAgY2xlYXJFcnJvcjogZnVuY3Rpb24gY2xlYXJFcnJvcihzdGF0ZSkgewogICAgICBzdGF0ZS5sb2dpbkVycm9yID0gbnVsbDsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmLCBwYXlsb2FkKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGNvbW1pdCwgYXV0aENvbnRyb2xsZXIsIHVzZXIsIGl0ZW07CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICAgICAgICAgICAgICBjb21taXQoImNsZWFyRXJyb3IiKTsKICAgICAgICAgICAgICAgIGNvbW1pdCgic2V0UHJvY2Vzc2luZyIsIHRydWUpOwogICAgICAgICAgICAgICAgYXV0aENvbnRyb2xsZXIgPSBuZXcgQXV0aENvbnRyb2xsZXIoKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA0OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gYXV0aENvbnRyb2xsZXIubG9naW4ocGF5bG9hZC5lbWFpbCwgcGF5bG9hZC5wYXNzd29yZCk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIHVzZXIgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgaXRlbSA9IHsKICAgICAgICAgICAgICAgICAgdG9rZW46IHVzZXIuYWNjZXNzX3Rva2VuLAogICAgICAgICAgICAgICAgICBjbGllbnRfaWQ6IHVzZXIuY2xpZW50X2lkLAogICAgICAgICAgICAgICAgICByb2xlOiB1c2VyLnByb2ZpbGUKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBzZXRDdXJyZW50VXNlcihpdGVtKTsKICAgICAgICAgICAgICAgIGNvbW1pdCgic2V0VXNlciIsIGl0ZW0pOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE4OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTM7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDQpOwogICAgICAgICAgICAgICAgc2V0Q3VycmVudFVzZXIobnVsbCk7CiAgICAgICAgICAgICAgICBjb21taXQoInNldEVycm9yIiwgX2NvbnRleHQudDAubWVzc2FnZSk7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgY29tbWl0KCJjbGVhckVycm9yIik7CiAgICAgICAgICAgICAgICB9LCAzMDAwKTsKCiAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbNCwgMTNdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHNpZ25PdXQ6IGZ1bmN0aW9uIHNpZ25PdXQoX3JlZjIpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdDsKICAgICAgc2V0Q3VycmVudFVzZXIobnVsbCk7CiAgICAgIGNvbW1pdCgic2V0TG9nb3V0Iik7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/home/filippo/Área de Trabalho/snowman/frontend/src/store/modules/user.js"],"names":["AuthController","setCurrentUser","getCurrentUser","state","currentUser","loginError","processing","getters","mutations","setUser","payload","setLogout","setProcessing","setError","setForgotMailSuccess","setResetPasswordSuccess","clearError","actions","login","commit","authController","email","password","user","item","token","access_token","client_id","role","profile","message","setTimeout","signOut"],"mappings":"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","sourcesContent":["import AuthController from \"../../controllers/authController\";\nimport { setCurrentUser, getCurrentUser } from \"../../utils\";\n\nexport default {\n  state: {\n    currentUser: getCurrentUser(),\n    loginError: null,\n    processing: false,\n  },\n  getters: {\n    currentUser: state => state.currentUser,\n    processing: state => state.processing,\n    loginError: state => state.loginError,\n  },\n  mutations: {\n    setUser(state, payload) {\n      state.currentUser = payload;\n      state.processing = false;\n      state.loginError = null;\n    },\n    setLogout(state) {\n      state.currentUser = null;\n      state.processing = false;\n      state.loginError = null;\n    },\n    setProcessing(state, payload) {\n      state.processing = payload;\n      state.loginError = null;\n    },\n    setError(state, payload) {\n      state.loginError = payload;\n      state.currentUser = null;\n      state.processing = false;\n    },\n    setForgotMailSuccess(state) {\n      state.loginError = null;\n      state.currentUser = null;\n      state.processing = false;\n    },\n    setResetPasswordSuccess(state) {\n      state.loginError = null;\n      state.currentUser = null;\n      state.processing = false;\n    },\n    clearError(state) {\n      state.loginError = null;\n    }\n  },\n  actions: {\n    async login({ commit }, payload) {\n      commit(\"clearError\");\n      commit(\"setProcessing\", true);\n\n      const authController = new AuthController();\n\n      try {\n        const user = await authController.login(\n          payload.email,\n          payload.password\n        );\n\n        const item = { token: user.access_token, client_id: user.client_id, role: user.profile };\n        setCurrentUser(item);\n        commit(\"setUser\", item);\n      } catch (err) {\n        setCurrentUser(null);\n        commit(\"setError\", err.message);\n        setTimeout(() => {\n          commit(\"clearError\");\n        }, 3000);\n      }\n    },\n\n    signOut({ commit }) {\n      setCurrentUser(null);\n      commit(\"setLogout\");\n    }\n  }\n};\n"]}]}