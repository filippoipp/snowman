{"remainingRequest":"/home/filippo/Área de Trabalho/snowman/front/node_modules/babel-loader/lib/index.js!/home/filippo/Área de Trabalho/snowman/front/node_modules/eslint-loader/index.js??ref--13-0!/home/filippo/Área de Trabalho/snowman/front/src/store/modules/user.js","dependencies":[{"path":"/home/filippo/Área de Trabalho/snowman/front/src/store/modules/user.js","mtime":1617230510148},{"path":"/home/filippo/Área de Trabalho/snowman/front/node_modules/cache-loader/dist/cjs.js","mtime":1614099632392},{"path":"/home/filippo/Área de Trabalho/snowman/front/node_modules/babel-loader/lib/index.js","mtime":1614027570184},{"path":"/home/filippo/Área de Trabalho/snowman/front/node_modules/eslint-loader/index.js","mtime":1605203058655}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2ZpbGlwcG8vXHhDMXJlYSBkZSBUcmFiYWxoby9zbm93bWFuL2Zyb250L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0IEF1dGhDb250cm9sbGVyIGZyb20gIi4uLy4uL2NvbnRyb2xsZXJzL2F1dGhDb250cm9sbGVyIjsKaW1wb3J0IHsgc2V0Q3VycmVudFVzZXIsIGdldEN1cnJlbnRVc2VyIH0gZnJvbSAiLi4vLi4vdXRpbHMiOwpleHBvcnQgZGVmYXVsdCB7CiAgc3RhdGU6IHsKICAgIGN1cnJlbnRVc2VyOiBnZXRDdXJyZW50VXNlcigpLAogICAgbG9naW5FcnJvcjogbnVsbCwKICAgIHByb2Nlc3Npbmc6IGZhbHNlCiAgfSwKICBnZXR0ZXJzOiB7CiAgICBjdXJyZW50VXNlcjogZnVuY3Rpb24gY3VycmVudFVzZXIoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmN1cnJlbnRVc2VyOwogICAgfSwKICAgIHByb2Nlc3Npbmc6IGZ1bmN0aW9uIHByb2Nlc3Npbmcoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnByb2Nlc3Npbmc7CiAgICB9LAogICAgbG9naW5FcnJvcjogZnVuY3Rpb24gbG9naW5FcnJvcihzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUubG9naW5FcnJvcjsKICAgIH0KICB9LAogIG11dGF0aW9uczogewogICAgc2V0VXNlcjogZnVuY3Rpb24gc2V0VXNlcihzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5jdXJyZW50VXNlciA9IHBheWxvYWQ7CiAgICAgIHN0YXRlLnByb2Nlc3NpbmcgPSBmYWxzZTsKICAgICAgc3RhdGUubG9naW5FcnJvciA9IG51bGw7CiAgICB9LAogICAgc2V0TG9nb3V0OiBmdW5jdGlvbiBzZXRMb2dvdXQoc3RhdGUpIHsKICAgICAgc3RhdGUuY3VycmVudFVzZXIgPSBudWxsOwogICAgICBzdGF0ZS5wcm9jZXNzaW5nID0gZmFsc2U7CiAgICAgIHN0YXRlLmxvZ2luRXJyb3IgPSBudWxsOwogICAgfSwKICAgIHNldFByb2Nlc3Npbmc6IGZ1bmN0aW9uIHNldFByb2Nlc3Npbmcoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3RhdGUucHJvY2Vzc2luZyA9IHBheWxvYWQ7CiAgICAgIHN0YXRlLmxvZ2luRXJyb3IgPSBudWxsOwogICAgfSwKICAgIHNldEVycm9yOiBmdW5jdGlvbiBzZXRFcnJvcihzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5sb2dpbkVycm9yID0gcGF5bG9hZDsKICAgICAgc3RhdGUuY3VycmVudFVzZXIgPSBudWxsOwogICAgICBzdGF0ZS5wcm9jZXNzaW5nID0gZmFsc2U7CiAgICB9LAogICAgc2V0Rm9yZ290TWFpbFN1Y2Nlc3M6IGZ1bmN0aW9uIHNldEZvcmdvdE1haWxTdWNjZXNzKHN0YXRlKSB7CiAgICAgIHN0YXRlLmxvZ2luRXJyb3IgPSBudWxsOwogICAgICBzdGF0ZS5jdXJyZW50VXNlciA9IG51bGw7CiAgICAgIHN0YXRlLnByb2Nlc3NpbmcgPSBmYWxzZTsKICAgIH0sCiAgICBzZXRSZXNldFBhc3N3b3JkU3VjY2VzczogZnVuY3Rpb24gc2V0UmVzZXRQYXNzd29yZFN1Y2Nlc3Moc3RhdGUpIHsKICAgICAgc3RhdGUubG9naW5FcnJvciA9IG51bGw7CiAgICAgIHN0YXRlLmN1cnJlbnRVc2VyID0gbnVsbDsKICAgICAgc3RhdGUucHJvY2Vzc2luZyA9IGZhbHNlOwogICAgfSwKICAgIGNsZWFyRXJyb3I6IGZ1bmN0aW9uIGNsZWFyRXJyb3Ioc3RhdGUpIHsKICAgICAgc3RhdGUubG9naW5FcnJvciA9IG51bGw7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICBsb2dpbjogZnVuY3Rpb24gbG9naW4oX3JlZiwgcGF5bG9hZCkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBjb21taXQsIGF1dGhDb250cm9sbGVyLCB1c2VyLCBpdGVtOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICAgICAgICAgICAgY29tbWl0KCJjbGVhckVycm9yIik7CiAgICAgICAgICAgICAgICBjb21taXQoInNldFByb2Nlc3NpbmciLCB0cnVlKTsKICAgICAgICAgICAgICAgIGF1dGhDb250cm9sbGVyID0gbmV3IEF1dGhDb250cm9sbGVyKCk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIGF1dGhDb250cm9sbGVyLmxvZ2luKHBheWxvYWQuZW1haWwsIHBheWxvYWQucGFzc3dvcmQpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICB1c2VyID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGl0ZW0gPSB7CiAgICAgICAgICAgICAgICAgIHRva2VuOiB1c2VyLnRva2VuLAogICAgICAgICAgICAgICAgICB1c2VyX2lkOiB1c2VyLnVzZXIuaWQsCiAgICAgICAgICAgICAgICAgIG5hbWU6IHVzZXIudXNlci5uYW1lCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgc2V0Q3VycmVudFVzZXIoaXRlbSk7CiAgICAgICAgICAgICAgICBjb21taXQoInNldFVzZXIiLCBpdGVtKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxODsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDEzOwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSg0KTsKICAgICAgICAgICAgICAgIHNldEN1cnJlbnRVc2VyKG51bGwpOwogICAgICAgICAgICAgICAgY29tbWl0KCJzZXRFcnJvciIsIF9jb250ZXh0LnQwLm1lc3NhZ2UpOwogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIGNvbW1pdCgiY2xlYXJFcnJvciIpOwogICAgICAgICAgICAgICAgfSwgMzAwMCk7CgogICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzQsIDEzXV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzaWduT3V0OiBmdW5jdGlvbiBzaWduT3V0KF9yZWYyKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQ7CiAgICAgIHNldEN1cnJlbnRVc2VyKG51bGwpOwogICAgICBjb21taXQoInNldExvZ291dCIpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/home/filippo/Área de Trabalho/snowman/front/src/store/modules/user.js"],"names":["AuthController","setCurrentUser","getCurrentUser","state","currentUser","loginError","processing","getters","mutations","setUser","payload","setLogout","setProcessing","setError","setForgotMailSuccess","setResetPasswordSuccess","clearError","actions","login","commit","authController","email","password","user","item","token","user_id","id","name","message","setTimeout","signOut"],"mappings":"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","sourcesContent":["import AuthController from \"../../controllers/authController\";\nimport { setCurrentUser, getCurrentUser } from \"../../utils\";\n\nexport default {\n  state: {\n    currentUser: getCurrentUser(),\n    loginError: null,\n    processing: false,\n  },\n  getters: {\n    currentUser: state => state.currentUser,\n    processing: state => state.processing,\n    loginError: state => state.loginError,\n  },\n  mutations: {\n    setUser(state, payload) {\n      state.currentUser = payload;\n      state.processing = false;\n      state.loginError = null;\n    },\n    setLogout(state) {\n      state.currentUser = null;\n      state.processing = false;\n      state.loginError = null;\n    },\n    setProcessing(state, payload) {\n      state.processing = payload;\n      state.loginError = null;\n    },\n    setError(state, payload) {\n      state.loginError = payload;\n      state.currentUser = null;\n      state.processing = false;\n    },\n    setForgotMailSuccess(state) {\n      state.loginError = null;\n      state.currentUser = null;\n      state.processing = false;\n    },\n    setResetPasswordSuccess(state) {\n      state.loginError = null;\n      state.currentUser = null;\n      state.processing = false;\n    },\n    clearError(state) {\n      state.loginError = null;\n    }\n  },\n  actions: {\n    async login({ commit }, payload) {\n      commit(\"clearError\");\n      commit(\"setProcessing\", true);\n\n      const authController = new AuthController();\n\n      try {\n        const user = await authController.login(\n          payload.email,\n          payload.password\n        );\n\n        const item = { token: user.token, user_id: user.user.id, name: user.user.name };\n        setCurrentUser(item);\n        commit(\"setUser\", item);\n      } catch (err) {\n        setCurrentUser(null);\n        commit(\"setError\", err.message);\n        setTimeout(() => {\n          commit(\"clearError\");\n        }, 3000);\n      }\n    },\n\n    signOut({ commit }) {\n      setCurrentUser(null);\n      commit(\"setLogout\");\n    }\n  }\n};\n"]}]}